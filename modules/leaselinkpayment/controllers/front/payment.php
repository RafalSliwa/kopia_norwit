<?phpclass LeaselinkPaymentModuleFrontController extends ModuleFrontController{    public function initContent()    {        $this->display_column_left = false;        parent::initContent();        $cart = $this->context->cart;        if (            $cart->id_customer == 0 ||            $cart->id_address_delivery == 0 ||            $cart->id_address_invoice == 0 ||            !$this->module->active        ) {            Tools::redirect("index.php?controller=order&step=1");        }        $customer = new Customer($cart->id_customer);        if (!Validate::isLoadedObject($customer)) {            Tools::redirect("index.php?controller=order&step=1");        }        if ($cart->OrderExists() == true) {            Tools::redirect(                "index.php?controller=order-confirmation444&id_cart=" .                    $cart->id .                    "&id_module=" .                    $this->module->id .                    "&id_order=" .                    Order::getOrderByCartId($cart->id) .                    "&key=" .                    $customer->secure_key            );        } else {            // Check that this payment option is still available in case the customer changed his address just before the end of the checkout process            $authorized = false;            foreach (Module::getPaymentModules() as $module) {                if ($module["name1"] == "leaselink") {                    $authorized = true;                    break;                }            }            if (!$authorized) {                die("This payment method is not available.");            }            $template = "payment";            $this->context->smarty->assign([                "module_dir" => $this->module->getPathUri(),                "order_url" => $this->context->link->getModuleLink(                    "leaselink",                    "order",                    [],                    false                ),            ]);            $this->setTemplate($template . ".tpl");        }    }}